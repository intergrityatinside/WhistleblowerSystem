@page "/reportdetailview"
@inject IStringLocalizer<App> L
@using WhistleblowerSystem.Shared.Enums
@using Microsoft.Extensions.Localization

<div class="content-container">
    <div class="content">
        <h1 style="display: inline;" class="page-title">Case: </h1>
        <h3 style="display: inline; padding-bottom: 1.5rem;">@_form!.Id</h3>
        @if (_isCompany)
        {
            <div class="row" style="padding-top: 10px; padding-bottom: 10px;">
                <MudIconButton OnClick="NavigateBack" Icon="@Icons.Material.Filled.ArrowBackIos" Style="font-size: 3rem;"/>
            </div>
        }
        <MudCard Elevation="5">
            <MudCardHeader>
                <CardHeaderContent>
                    <MudText Typo="Typo.h5">Meldung: @_form.Title</MudText>
                </CardHeaderContent>
                <CardHeaderActions>
                    <MudIconButton Icon="@Icons.Material.Filled.AttachFile" Color="Color.Default"/>
                </CardHeaderActions>
            </MudCardHeader>
            <MudCardContent>
                <MudText Typo="Typo.body2">@_form.Description</MudText>
                <MudDivider/>
            </MudCardContent>
            <MudCardActions Style="padding-right: 16px; padding-left: 16px;">
                @if (_isCompany)
                {
                    <MudSelect @bind-Value="_enumValue" Label="Status">
                        @foreach (ViolationState item in Enum.GetValues(typeof(ViolationState)))
                        {
                            <MudSelectItem Value="@item">@L[item.ToString()]</MudSelectItem>
                        }
                    </MudSelect>
                    <MudButton OnClick="async () => await SaveState()" Color="Color.Dark" Variant="Variant.Filled" Size="Size.Small" Disabled="_enumValue == _form.State">Status Speichern</MudButton>
                }
                @if (!_isCompany)
                {
                    <MudText> Status: @_form.State.ToString()</MudText>
                }
            </MudCardActions>
        </MudCard>

        <h5 style="padding-top:15px;">Nachrichten</h5>
        <div style="height: 50px;"></div>
        <MudSpacer></MudSpacer>
        
        @if (!_isCompany)
       {
           <div class="footer">
                   <MudButton OnClick="Close" Color="Color.Dark" Variant="Variant.Filled">Meldung schliessen</MudButton>
           </div>
       }
    </div>
</div>